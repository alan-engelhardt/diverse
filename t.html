<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T</title>
    <style>
        h1 {
            margin-bottom: 110vh;
        }

        div {
            background-color: orange;
            width: 200px;
            aspect-ratio: 1/1;
            margin: 10em;
        }

        .animation {
            rotate: 1turn;
        }
    </style>
</head>

<body>
    <h1>Scroll test</h1>
    <section>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </section>

    <script>
        const observer = new IntersectionObserver(entries => {
            console.log("in")
            entries.forEach(entry => {
                const square = entry.target.querySelector('div');

                if (entry.isIntersecting) {
                    square.classList.add('animation');
                    return; // if we added the class, exit the function
                }

                // We're not intersecting, so remove the class!
                square.classList.remove('animation');
            });
        });

        observer.observe(document.querySelector('div'));
    </script>
</body>

</html>